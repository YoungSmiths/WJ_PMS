# WJ_PMS(于2018.10.14转为私有项目开发)
Wangjing process management system.
- [开发日记](doc/devDiary.md)
- [设计图](design)
- [架构技术选择](doc/architecture.md)


## 订单状态
设计规约：
01、02、03...代表订单操作
**00表示待进行操作
**01表示正在进行操作
**02表示暂停操作
**03表示完成操作
**04表示审核通过
**05表示审核不通过

其中：
**00一般出现在订单拆分或者定向分配时
**03和**04状态的订单进入下一个操作
**05状态的订单会返回到上一步操作

```
01	->	添加订单
0103	->	订单添加完成
02	->	设计图纸
0201	->	正在设计
0202	->	暂停设计
0203	->	设计图纸完成
03	->	业务审核设计图
0304	->	业务审核设计图通过
0305	->	业务审核设计图不通过
04	->	财务审核设计图
0404	->	业务审核财务设计图通过
0405	->	业务审核财务设计图不通过
05	->	计划部排单
0503	->	计划部排单完成
06	->	业务部审核排单计划
0604	->	业务审核排单计划通过
0605	->	业务审核排单计划不通过
07	->	财务审核排单计划
0704	->	财务审核排单计划通过
0705	->	财务审核排单计划不通过
08	->	生产部审核排单计划
0804	->	生产部审核排单计划通过
0805	->	生产部审核排单计划不通过
09	->	拆分订单
0903	->	拆分订单完成
10	->	印刷部排单
1003	->	印刷部排单完成
11	->	大机印刷
1100	->	待大机印刷
1101	->	正在大机印刷
1102	->	暂停大机印刷
1103	->	完成大机印刷
12	->	小机印刷
1200	->	待小机印刷
1201	->	正在小机印刷
1202	->	暂停小机印刷
1203	->	完成小机印刷
13	->	外发
1300	->	待外发
1301	->	正在外发
1302	->	暂停外发
1303	->	完成外发

```
+ ============
    + 仓库会看到发纸待发纸子订单（点击开始，正在发纸，发之后点击结束，等待切纸）
      + 切纸部会看到等待切纸子订单（点击开始，正在切纸，切纸后点击结束）
    + 同时晒版部会进行晒版？？？？？？？？？
+ ===========
+ 当一个子订单，切纸晒版后，状态变为准备打印，点击开始，正在打印，点击结束。
  - 当所有子订单都打印结束后，父订单自动打印结束。
  - 当纸盒打印结束后，状态变为手动设置下一个部门
  - 当扑克正面订单和扑克反面订单打印结束后合并为扑克订单（ABC201805220000001BC）,状态为设置为下一个部门
+ 下一个部门可能为：
  - 全检部
  - 过油部
  - 啤机部
  - 分切部
  - 冲角部
  - 黏合部
  - 人工部
+ 机包装箱
+ 待入库
+ 正在入库
+ 已入库
+ 业务申请发货
+ 财务审核
+ 审核完成可申请发货

|code|name|desc|next_code|state|
|start|开始||waitDesign|待设计|1|
|waitDesign| 



## 表结构设计
### 用户表（wj_pmg_user)
|字段名|描述|
|:---:|:---:|
|userID|主键|
|userName|用户名|
|password|密码|
|roleID|角色ID|
|flag|是否在用标志位|
|createDate|创建日期|
|updateDate|修改日期|
### 操作记录表（wj_pmg_operate)
|字段名|描述|
|:---:|:---:|
|operateID|主键|
|orderID|订单号|
|operation|操作|
|operator|操作人|
|time|操作时间|
### 订单表（wj_pmg_order)
|字段名|描述|
|:---:|:---:|
|orderID|主键|
|name|名称|
|contract|合同号|
|count|数量|
|paper|用纸|
|size|尺寸|
|require|印刷要求|
|surface_treat|表面处理|
|print_require|印刷要求|
|accessories|配件|
|describe|描述|
### 用户角色表（wj_pmg_roler)
|字段名|描述|
|:---:|:---:|
|roleID|主键|
|name|名称|
### 用户权限表（wj_pmg_grant)
|字段名|描述|
|:---:|:---:|
|grantID|主键|
|name|权限名称|
### 角色权限关系表（wj_pmg_roler_grant_relation）
|字段名|描述|
|:---:|:---:|
|roler_grant_ID|主键|
|rolerID|角色主键|
|grantID|权限主键|
### 用户角色关系表（wj_pmg_user_roler_relation)
|字段名|描述|
|:---:|:---:|
|user_roler_ID|主键|
|userID|用户主键|
|rolerID|角色主键|
### 设计图存储表(wj_pmg_design_pic)
|字段名|描述|
|:---:|:---:|
|designID|主键|
|orderID|订单号|
|path|所在地址|
